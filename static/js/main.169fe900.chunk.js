(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{202:function(e,t,a){e.exports={up:"message-item_up__2s1s3"}},31:function(e,t,a){e.exports={item:"common_item__1OwAu",content:"common_content__2-hq1",title:"common_title__2bmLR"}},33:function(e,t,a){e.exports={extra:"topic_extra__2u0cT",left:"topic_left__1K78g",right:"topic_right__wpTam",tag:"topic_tag__AoLtP",timeago:"topic_timeago__3dff9"}},48:function(e,t,a){e.exports={container:"detail_container__3u9El",title:"detail_title__1ldUt",info:"detail_info__2peOv",prettyprint:"detail_prettyprint__1hqQk",extra:"detail_extra__2jv2w",tip:"detail_tip__1bcuI"}},5482:function(e,t,a){e.exports=a(5668)},5489:function(e,t,a){},55:function(e,t){},5645:function(e,t,a){var n={"./ar":159,"./ar.js":159,"./be":160,"./be.js":160,"./bg":161,"./bg.js":161,"./ca":162,"./ca.js":162,"./da":163,"./da.js":163,"./de":164,"./de.js":164,"./el":165,"./el.js":165,"./en":166,"./en.js":166,"./en_short":167,"./en_short.js":167,"./es":168,"./es.js":168,"./eu":169,"./eu.js":169,"./fa":170,"./fa.js":170,"./fi":171,"./fi.js":171,"./fr":172,"./fr.js":172,"./he":173,"./he.js":173,"./hu":174,"./hu.js":174,"./in_BG":175,"./in_BG.js":175,"./in_HI":176,"./in_HI.js":176,"./in_ID":177,"./in_ID.js":177,"./it":178,"./it.js":178,"./ja":179,"./ja.js":179,"./ko":180,"./ko.js":180,"./locales":181,"./locales.js":181,"./ml":182,"./ml.js":182,"./my":183,"./my.js":183,"./nb_NO":184,"./nb_NO.js":184,"./nl":185,"./nl.js":185,"./nn_NO":186,"./nn_NO.js":186,"./pl":187,"./pl.js":187,"./pt_BR":188,"./pt_BR.js":188,"./ro":189,"./ro.js":189,"./ru":190,"./ru.js":190,"./sv":191,"./sv.js":191,"./ta":192,"./ta.js":192,"./th":193,"./th.js":193,"./tr":194,"./tr.js":194,"./uk":195,"./uk.js":195,"./vi":196,"./vi.js":196,"./zh_CN":197,"./zh_CN.js":197,"./zh_TW":198,"./zh_TW.js":198};function r(e){var t=c(e);return a(t)}function c(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=c,e.exports=r,r.id=5645},5668:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),i=(a(5487),a(5489),a(19)),l=a(20),s=a(22),u=a(21),p=a(23),m=a(26),d=a(5),h=a(47),f=a.n(h),v=a(5674),g=a(5676),b=a(5670),E=a(108),j=a(8),y=a.n(j),k=a(60),C=a(16),w=a(5675),O=a(17),_="#80bd01";function x(e,t){return L.apply(this,arguments)}function L(){return(L=Object(C.a)(y.a.mark(function e(t,a){var n,r,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a&&(n.method="POST",n.headers={"Content-Type":"application/x-www-form-urlencoded"},n.body=new URLSearchParams(a).toString()),e.next=4,fetch("https://cnodejs.org/api/v1".concat(t),n);case 4:return r=e.sent,e.next=7,r.json();case 7:if((c=e.sent).success){e.next=10;break}throw new Error(c.error_msg);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var M=function(e){return function(t){return function(a){return r.a.createElement(e,null,function(e){return r.a.createElement(t,Object.assign({},e,a))})}}},T=[{pathname:"/",title:"\u793e\u533a",Icon:O.e},{pathname:"/good",title:"\u7cbe\u534e",Icon:O.k},{pathname:"/share",title:"\u5206\u4eab",Icon:O.i},{pathname:"/ask",title:"\u95ee\u7b54",Icon:O.f},{pathname:"/job",title:"\u62db\u8058",Icon:O.j}],S=["all","good","share","ask","job"],N=r.a.createContext(),I=N.Consumer,A=N.Provider,R=I,W=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,isLoadingMore:!1,topicMapper:{},topics:[[],[],[],[],[]],pages:[1,1,1,1,1]},a.getCurrentTab=function(){return new URLSearchParams(a.props.location.search).get("tab")||"all"},a.getCurrentIndex=function(){return S.indexOf(a.getCurrentTab())},a.fetchTopics=function(){var e=Object(C.a)(y.a.mark(function e(t){var n,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.getCurrentTab(),e.next=3,x("/topics?tab=".concat(n,"&page=").concat(t,"&limit=20"));case 3:return r=e.sent,c=r.data,o={},c.forEach(function(e){o[e.id]=e}),a.setState({topicMapper:Object(k.a)({},a.state.topicMapper,o)}),e.abrupt("return",c);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.load=Object(C.a)(y.a.mark(function e(){var t,n,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getCurrentIndex(),n=a.state.topics.slice(),r=a.state.pages.slice(),e.prev=3,c=1,a.setState({isLoading:!0}),e.next=8,a.fetchTopics(c);case 8:o=e.sent,r[t]=c,n[t]=o,a.setState({topics:n,pages:r});case 12:return e.prev=12,a.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,,12,15]])})),a.loadMore=Object(C.a)(y.a.mark(function e(){var t,n,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.getCurrentIndex(),n=a.state.topics.slice(),r=a.state.pages.slice(),e.prev=3,c=r[t]+1,a.setState({isLoadingMore:!0}),e.next=8,a.fetchTopics(c);case 8:o=e.sent,r[t]=c,n[t]=Object(E.a)(n[t]).concat(Object(E.a)(o)),a.setState({topics:n,pages:r});case 12:return e.prev=12,a.setState({isLoadingMore:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,,12,15]])})),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.getCurrentIndex(),t=this.state,a=t.isLoading,n=t.isLoadingMore,c=t.topicMapper,o=this.load,i=this.loadMore,l=(this.setScrollY,this.state.topics[e]);return r.a.createElement(A,{value:{topics:l,isLoading:a,isLoadingMore:n,load:o,loadMore:i,currentIndex:e,topicMapper:c}},this.props.children)}}]),t}(r.a.Component);W=Object(w.a)(W);var D=r.a.createContext(),P=(D.Consumer,D.Provider),V=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,setVisible:function(e){a.setState({visible:e})}},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(P,{value:this.state},this.props.children)}}]),t}(r.a.Component),U=r.a.createContext(),z=U.Consumer,B=U.Provider,H=z,q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,count:0,unreadMessages:[],readMessages:[]},a.queueAfterToken=[],a.runAfterTokenVerified=function(e){a.queueAfterToken.push(e)},a.verifyToken=function(){var e=Object(C.a)(y.a.mark(function e(t){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("/accesstoken",{accesstoken:t});case 3:return n=e.sent,n.id,n.loginname,n.avatar_url,a.setState({token:t}),a.fetchUnreadCount(t),localStorage.setItem("token",t),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),a.fetchUnreadCount=function(){var e=Object(C.a)(y.a.mark(function e(t){var n,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/count?accesstoken="+t);case 2:n=e.sent,r=n.data,a.setState({count:r}),setTimeout(function(){a.fetchUnreadCount(t)},1e4);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.fetchMessages=Object(C.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/messages?accesstoken="+a.state.token);case 2:t=e.sent,n=t.data,a.setState({unreadMessages:n.hasnot_read_messages,readMessages:n.has_read_messages});case 5:case"end":return e.stop()}},e,this)})),a.markAllAsRead=Object(C.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/mark_all",{accesstoken:a.state.token});case 2:a.fetchMessages();case 3:case"end":return e.stop()}},e,this)})),a.postTopic=function(){var e=Object(C.a)(y.a.mark(function e(t){var n,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.title,t.tab,r=t.content,e.next=3,x("/topics",{title:n,tab:"dev",content:r,accesstoken:a.state.token});case 3:return c=e.sent,o=c.topic_id,e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(C.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=4;break}return e.next=4,this.verifyToken(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.token,a=e.count,n=e.unreadMessages,c=e.readMessages,o=this.fetchUnreadCount,i=this.fetchMessages,l=this.runAfterTokenVerified,s=this.markAllAsRead,u=this.verifyToken,p=this.postTopic;return r.a.createElement(B,{value:{token:t,count:a,unreadMessages:n,readMessages:c,fetchUnreadCount:o,fetchMessages:i,runAfterTokenVerified:l,markAllAsRead:s,verifyToken:u,postTopic:p}},this.props.children)}}]),t}(r.a.Component),F=function(e){var t=e.children;return r.a.createElement(q,null,r.a.createElement(W,null,r.a.createElement(V,null,t)))},G=Object(m.createMuiTheme)({palette:{primary:d.o.teal,secondary:d.o.grey},appBar:{},floatingActionButton:{},raisedButton:{}}),J=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(F,null,r.a.createElement(m.MuiThemeProvider,{theme:G},r.a.createElement("main",null,r.a.createElement(f.a,{titleTemplate:"%s - CNode PWA",defaultTitle:"CNode PWA"}),r.a.createElement("div",{style:{marginTop:48}},r.a.createElement(g.a,null,r.a.createElement(b.a,{exact:!0,path:"/",component:je}),r.a.createElement(b.a,{path:"/message",component:Ye}),r.a.createElement(b.a,{path:"/topic/:id",component:we}),r.a.createElement(b.a,{path:"/login",component:Ge}),r.a.createElement(b.a,{path:"/post",component:nt}),r.a.createElement(b.a,{path:"/about",component:Be}),r.a.createElement(b.a,{path:"/user/:loginname",component:Ze}),r.a.createElement(b.a,{component:He})))))))}}]),t}(r.a.Component),Q=M(H)(J),Y=a(5672),K=a(35),X=Object(w.a)(function(e){var t=e.title,a=e.rightWidget,n=e.history;return r.a.createElement(d.a,{color:"default"},r.a.createElement(d.m,{variant:"dense"},r.a.createElement(d.f,{style:{marginLeft:-12,marginRight:20},onClick:function(){1===n.length?n.push("/"):n.goBack()}},r.a.createElement(O.b,null)),r.a.createElement(d.n,{variant:"title",style:{flexGrow:1}},t),r.a.createElement(a,null)))}),Z=a(5671),$=a(40),ee=a.n($),te=(a(55),a(31)),ae=a.n(te),ne=a(33),re=a.n(ne),ce=Object(K.b)(function(e){return r.a.createElement(d.g,{button:!0,component:Z.a,to:"/topic/".concat(e.id),className:ae.a.item},r.a.createElement(le,e.author),r.a.createElement("div",{className:ae.a.content},r.a.createElement("h3",{className:ae.a.title},e.title),r.a.createElement("div",{className:re.a.extra},r.a.createElement("div",{className:re.a.left},r.a.createElement("div",{className:re.a.tag,style:{backgroundColor:_}},e.top?"\u7f6e\u9876":e.good?"\u7cbe\u534e":{share:"\u5206\u4eab",ask:"\u95ee\u7b54",job:"\u62db\u8058"}[e.tab]),r.a.createElement("div",{className:re.a.right},r.a.createElement("span",{style:{color:"#9e78c0"}},e.reply_count," "),"\u56de\u590d / ",r.a.createElement("span",null,e.visit_count)," \u6d4f\u89c8")),r.a.createElement(ee.a,{className:re.a.timeago,datetime:e.last_reply_at,locale:"zh_CN",live:!1}))))}),oe=function(e){return r.a.createElement(d.g,{button:!0,component:Z.a,to:"/topic/".concat(e.id),className:ae.a.item},r.a.createElement(le,e.author),r.a.createElement("div",{className:ae.a.content},r.a.createElement("h3",{className:ae.a.title},e.title),r.a.createElement("div",{className:re.a.extra},r.a.createElement("div",{className:re.a.left},e.author.loginname),r.a.createElement(ee.a,{className:re.a.timeago,datetime:e.last_reply_at,locale:"zh_CN",live:!1}))))},ie=Object(K.b)(function(e){return r.a.createElement("div",{style:{marginTop:8,marginBottom:8}},r.a.createElement("div",{style:{display:"flex",marginBottom:6}},r.a.createElement(le,e.author),r.a.createElement(se,null,r.a.createElement("div",null,e.author.loginname),r.a.createElement("time",null,"\u53d1\u8868\u4e8e",r.a.createElement(ee.a,{datetime:e.create_at,locale:"zh_CN",live:!1})))),r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:e.content}}),r.a.createElement(d.e,null))}),le=Object(w.a)(function(e){var t=e.avatar_url,a=e.loginname,n=e.imgStyle,c=e.history;return r.a.createElement("img",{src:t,style:Object(k.a)({minWidth:48,width:48,height:48,borderRadius:"50%"},n),alt:a,onClick:function(e){e.preventDefault(),c.push("/user/".concat(a))}})}),se=function(e){return r.a.createElement("div",Object.assign({},e,{style:Object(k.a)({},e.style,{display:"flex",flexDirection:"column",justifyContent:"space-between",lineHeight:"24px"})}))},ue=a(202),pe=a.n(ue),me=function(e){return r.a.createElement(d.g,{button:!0,component:Z.a,to:"/topic/".concat(e.topic.id),className:ae.a.item},r.a.createElement(le,e.author),r.a.createElement("div",{className:ae.a.content},r.a.createElement("div",{className:pe.a.up},r.a.createElement("span",{style:{color:_}},e.author.loginname)," ","\u56de\u590d\u4e86\u4f60\u7684\u8bdd\u9898"),r.a.createElement("div",{className:ae.a.title},e.topic.title)))},de=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:24}},r.a.createElement(d.d,{size:36}))};function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var fe=r.a.createElement("rect",{width:80,height:80,fill:"#444"}),ve=r.a.createElement("path",{d:"M 39.741 72.872 C 38.882 72.872 38.025 72.647 37.273 72.212 L 29.42 67.566 C 28.248 66.91 28.819 66.678 29.207 66.543 C 30.77 66 31.088 65.875 32.758 64.929 C 32.931 64.83 33.162 64.867 33.342 64.974 L 39.375 68.556 C 39.594 68.677 39.901 68.677 40.103 68.556 L 63.625 54.979 C 63.844 54.854 63.983 54.603 63.983 54.343 L 63.983 27.196 C 63.983 26.931 63.843 26.683 63.619 26.549 L 40.106 12.984 C 39.889 12.857 39.6 12.857 39.382 12.984 L 15.878 26.552 C 15.649 26.683 15.505 26.938 15.505 27.196 L 15.505 54.342 C 15.505 54.602 15.649 54.848 15.876 54.971 L 22.318 58.693 C 25.814 60.441 27.956 58.383 27.956 56.314 L 27.956 29.514 C 27.956 29.135 28.261 28.836 28.639 28.836 L 31.622 28.836 C 31.995 28.836 32.304 29.135 32.304 29.514 L 32.304 56.314 C 32.304 60.98 29.763 63.656 25.339 63.656 C 23.979 63.656 22.909 63.656 19.921 62.184 L 13.753 58.633 C 12.229 57.751 11.286 56.105 11.286 54.342 L 11.286 27.196 C 11.286 25.433 12.228 23.786 13.753 22.909 L 37.274 9.317 C 38.763 8.476 40.742 8.476 42.218 9.317 L 65.737 22.909 C 67.261 23.791 68.209 25.433 68.209 27.196 L 68.209 54.342 C 68.209 56.105 67.262 57.745 65.737 58.633 L 42.218 72.212 C 41.466 72.647 40.611 72.872 39.741 72.872",fill:"#80bd01"}),ge=r.a.createElement("path",{d:"M 47.007 54.171 C 36.713 54.171 34.558 49.446 34.558 45.484 C 34.558 45.107 34.861 44.806 35.238 44.806 L 38.279 44.806 C 38.618 44.806 38.902 45.049 38.954 45.381 C 39.413 48.478 40.782 50.039 47.008 50.039 C 51.962 50.039 54.072 48.918 54.072 46.289 C 54.072 44.774 53.474 43.649 45.773 42.895 C 39.336 42.257 35.357 40.835 35.357 35.687 C 35.357 30.942 39.357 28.111 46.064 28.111 C 53.599 28.111 57.327 30.726 57.8 36.338 C 57.818 36.531 57.748 36.717 57.619 36.861 C 57.49 36.996 57.311 37.078 57.121 37.078 L 54.069 37.078 C 53.752 37.078 53.473 36.853 53.408 36.547 C 52.677 33.289 50.895 32.248 46.063 32.248 C 40.653 32.248 40.024 34.133 40.024 35.545 C 40.024 37.256 40.766 37.754 48.071 38.721 C 55.3 39.676 58.733 41.03 58.733 46.111 C 58.733 51.236 54.459 54.171 47.007 54.171",fill:"#80bd01"}),be=function(e){return r.a.createElement("svg",he({x:"0px",y:"0px",viewBox:"0 0 80 80",width:512,height:512},e),fe,ve,ge)},Ee=(a.p,function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",dialogVisible:!1},a.loadMore=Object(Y.a)(function(){document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight<120&&!a.props.isLoadingMore&&!a.props.isLoading&&a.props.loadMore()},500),a.goToPost=function(){a.props.history.push("/post")},a.goToMessage=function(){a.props.history.push("/message")},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===this.props.topics.length&&this.props.load(),window.addEventListener("scroll",this.loadMore)}},{key:"componentDidUpdate",value:function(e){this.props.location.key===e.location.key||"/"!==this.props.location.pathname||"/"!==e.location.pathname||this.props.isLoading||this.props.isLoadingMore||(console.log("reload"),this.props.load())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.loadMore)}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement("div",{style:{marginBottom:84,marginTop:-48}},r.a.createElement(R,null,function(t){t.setScrollY;var a=t.currentIndex;t.load;return r.a.createElement(d.h,{square:!0,style:{position:"sticky",top:-48,zIndex:1}},r.a.createElement(d.m,{variant:"dense"},r.a.createElement(be,{width:24,height:24}),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(d.f,{color:"default",onClick:e.goToMessage},r.a.createElement(H,null,function(e){var t=e.count;return t?r.a.createElement(d.b,{badgeContent:t,color:"secondary"},r.a.createElement(O.g,null)):r.a.createElement(O.g,null)})),r.a.createElement(d.f,{color:"default"},r.a.createElement(O.a,null))),r.a.createElement(d.k,{style:{background:"#fff"},value:a,onChange:function(t,a){0===a?e.props.history.push("/"):e.props.history.push("/?tab="+S[a])},indicatorColor:"primary",textColor:"primary",fullWidth:!0},T.map(function(e){return r.a.createElement(d.j,{key:e.pathname,label:e.title})})))}),t.isLoading?r.a.createElement(de,null):r.a.createElement("div",null,t.topics.map(function(e,t){return r.a.createElement(ce,Object.assign({},e,{key:e.id}))})),t.isLoadingMore&&r.a.createElement(de,null),r.a.createElement(d.c,{variant:"fab",style:{position:"fixed",bottom:16,right:16},onClick:this.goToPost},r.a.createElement(O.d,null)))}}]),t}(r.a.Component)),je=Object(K.a)(w.a,M(R))(Ee),ye=a(48),ke=a.n(ye),Ce=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={topic:null,isLoading:!1},a.fetchTopic=Object(C.a)(y.a.mark(function e(){var t,n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({isLoading:!0}),e.next=4,x("/topic/".concat(a.props.match.params.id));case 4:t=e.sent,n=t.data,a.setState({topic:n});case 7:return e.prev=7,a.setState({isLoading:!1}),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[0,,7,10]])})),a.isTopicScreen=function(e){return/^\/topic\//.test(e.location.pathname)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.isTopicScreen(this.props)&&(!this.isTopicScreen(e)||(e.match.params.id,this.props.match.params.id))}},{key:"render",value:function(){var e=this,t=this.state;t.topic,t.isLoading,this.props.history;return r.a.createElement(R,null,function(t){var a=t.topicMapper[e.props.match.params.id];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{title:a.title}),r.a.createElement(X,{title:"\u8bdd\u9898",rightWidget:function(){return r.a.createElement(d.f,{color:"inherit",onClick:function(){navigator.share&&navigator.share({title:a.title,text:"Hello World",url:window.location.href})}},r.a.createElement(O.i,null))}}),r.a.createElement("div",{className:ke.a.container},r.a.createElement("div",{className:ke.a.title},a.title),r.a.createElement("div",{className:ke.a.info},r.a.createElement(le,a.author),r.a.createElement("div",{className:ke.a.extra},r.a.createElement("div",null,a.author.loginname),r.a.createElement("div",{className:ke.a.tip},r.a.createElement("span",null,"\u521b\u5efa\u4e8e",r.a.createElement(ee.a,{datetime:a.create_at,locale:"zh_CN",live:!1,style:{color:"#838383"}})),r.a.createElement("span",{style:{marginLeft:"6px"}},a.visit_count,"\u6b21\u6d4f\u89c8")))),r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:a.content}}),r.a.createElement("div",null,r.a.createElement("div",{style:{background:"#eee",padding:6}},a.reply_count?"\u5171 ".concat(a.reply_count," \u6761\u56de\u590d"):"\u6682\u65e0\u56de\u590d"),(a.replies||[]).map(function(e){return r.a.createElement(ie,Object.assign({},e,{key:e.id}))}))))})}}]),t}(r.a.Component),we=Object(w.a)(Ce),Oe=a(57),_e=a.n(Oe),xe=a(58),Le=a.n(xe),Me=a(39),Te=a.n(Me);function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Ne=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M127.987,52.994c0-1.084-0.57-2.08-1.506-2.617l-24.937-14.352 c-0.422-0.248-0.895-0.377-1.373-0.396h-0.258c-0.477,0.019-0.949,0.148-1.377,0.396L73.598,50.377 c-0.929,0.537-1.508,1.533-1.508,2.617l0.055,38.644c0,0.538,0.279,1.038,0.752,1.301c0.463,0.278,1.035,0.278,1.496,0l14.821-8.485 c0.937-0.558,1.507-1.539,1.507-2.613V63.784c0-1.076,0.571-2.071,1.504-2.606l6.311-3.636c0.47-0.271,0.984-0.404,1.51-0.404 c0.513,0,1.041,0.133,1.498,0.404l6.308,3.636c0.934,0.535,1.506,1.53,1.506,2.606V81.84c0,1.074,0.578,2.062,1.51,2.613 l14.816,8.485c0.465,0.278,1.045,0.278,1.506,0c0.459-0.263,0.748-0.763,0.748-1.301L127.987,52.994z"}),Ie=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M261.147-0.129c-0.467-0.26-1.037-0.254-1.498,0.016 c-0.46,0.271-0.743,0.765-0.743,1.299v38.271c0,0.376-0.201,0.724-0.525,0.913c-0.326,0.188-0.729,0.188-1.056,0l-6.246-3.599 c-0.932-0.537-2.077-0.536-3.01,0.001L223.122,51.17c-0.933,0.537-1.506,1.532-1.506,2.607v28.801c0,1.076,0.573,2.07,1.505,2.609 l24.946,14.408c0.934,0.539,2.081,0.539,3.014,0l24.95-14.408c0.933-0.539,1.506-1.533,1.506-2.609V10.786 c0-1.092-0.591-2.099-1.545-2.631L261.147-0.129z M258.833,73.115c0,0.27-0.145,0.519-0.378,0.651l-8.564,4.938 c-0.233,0.135-0.521,0.135-0.752,0l-8.566-4.938c-0.232-0.133-0.377-0.382-0.377-0.651v-9.891c0-0.269,0.145-0.517,0.376-0.651 l8.566-4.947c0.232-0.135,0.52-0.135,0.754,0l8.564,4.947c0.232,0.135,0.377,0.383,0.377,0.651V73.115z"}),Ae=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M350.4,62.966c0.928-0.539,1.499-1.531,1.499-2.604v-6.979 c0-1.073-0.571-2.066-1.5-2.605l-24.787-14.392c-0.934-0.542-2.084-0.543-3.02-0.004l-24.938,14.397 c-0.933,0.539-1.506,1.533-1.506,2.609v28.793c0,1.083,0.58,2.081,1.521,2.616l24.783,14.122c0.914,0.522,2.034,0.527,2.954,0.018 l14.989-8.332c0.477-0.266,0.772-0.765,0.774-1.308c0.004-0.543-0.285-1.046-0.755-1.315L315.32,73.576 c-0.47-0.268-0.758-0.767-0.758-1.306v-9.024c0-0.538,0.287-1.036,0.755-1.304l7.811-4.504c0.464-0.268,1.039-0.268,1.503,0 l7.815,4.504c0.467,0.268,0.754,0.766,0.754,1.304v7.101c0,0.538,0.288,1.036,0.755,1.306c0.467,0.269,1.042,0.267,1.508-0.003 L350.4,62.966z"}),Re=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M173.35,36.23c0.932-0.538,2.08-0.538,3.012,0l24.943,14.395 c0.934,0.537,1.508,1.532,1.508,2.609v28.811c0,1.077-0.574,2.071-1.506,2.61l-24.944,14.405c-0.933,0.538-2.081,0.538-3.014,0 l-24.938-14.405c-0.932-0.539-1.506-1.533-1.506-2.61V53.233c0-1.076,0.574-2.071,1.507-2.608L173.35,36.23z"}),We=r.a.createElement("path",{fill:"#80bd01",d:"M398.833,99.472c-0.859,0-1.716-0.225-2.468-0.66l-7.853-4.646c-1.172-0.656-0.601-0.888-0.213-1.023 c1.563-0.543,1.881-0.668,3.551-1.614c0.173-0.099,0.404-0.062,0.584,0.045l6.033,3.582c0.219,0.121,0.526,0.121,0.728,0 l23.522-13.577c0.219-0.125,0.358-0.376,0.358-0.636V53.796c0-0.265-0.14-0.513-0.364-0.647l-23.513-13.565 c-0.217-0.127-0.506-0.127-0.724,0L374.97,53.152c-0.229,0.131-0.373,0.386-0.373,0.644v27.146c0,0.26,0.144,0.506,0.371,0.629 l6.442,3.722c3.496,1.748,5.638-0.31,5.638-2.379v-26.8c0-0.379,0.305-0.678,0.683-0.678h2.983c0.373,0,0.682,0.299,0.682,0.678 v26.8c0,4.666-2.541,7.342-6.965,7.342c-1.36,0-2.43,0-5.418-1.472l-6.168-3.551c-1.524-0.882-2.467-2.528-2.467-4.291V53.796 c0-1.763,0.942-3.41,2.467-4.287l23.521-13.592c1.489-0.841,3.468-0.841,4.944,0l23.519,13.592c1.524,0.882,2.472,2.524,2.472,4.287 v27.146c0,1.763-0.947,3.403-2.472,4.291L401.31,98.812C400.558,99.247,399.703,99.472,398.833,99.472"}),De=r.a.createElement("path",{fill:"#80bd01",d:"M406.099,80.771c-10.294,0-12.449-4.725-12.449-8.687c0-0.377,0.303-0.678,0.68-0.678h3.041 c0.339,0,0.623,0.243,0.675,0.575c0.459,3.097,1.828,4.658,8.054,4.658c4.954,0,7.064-1.121,7.064-3.75 c0-1.515-0.598-2.64-8.299-3.394c-6.437-0.638-10.416-2.06-10.416-7.208c0-4.745,4-7.576,10.707-7.576 c7.535,0,11.263,2.615,11.736,8.227c0.018,0.193-0.052,0.379-0.181,0.523c-0.129,0.135-0.308,0.217-0.498,0.217h-3.052 c-0.317,0-0.596-0.225-0.661-0.531c-0.731-3.258-2.513-4.299-7.345-4.299c-5.41,0-6.039,1.885-6.039,3.297 c0,1.711,0.742,2.209,8.047,3.176c7.229,0.955,10.662,2.309,10.662,7.39C417.825,77.836,413.551,80.771,406.099,80.771"}),Pe=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M323.735,61.618c0.179-0.104,0.398-0.104,0.577,0l4.787,2.762 c0.18,0.103,0.289,0.294,0.289,0.5v5.527c0,0.207-0.109,0.397-0.289,0.501l-4.787,2.763c-0.179,0.103-0.398,0.103-0.577,0 l-4.783-2.763c-0.18-0.104-0.289-0.294-0.289-0.501V64.88c0-0.206,0.109-0.397,0.289-0.5L323.735,61.618z"}),Ve=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M36.28,61.87c1.098,0.65,1.358,0.255,1.742,0.035 c0.385-0.221,14.695-8.411,15.606-8.857c0.912-0.446,1.315-1.915,0.114-2.61c-1.201-0.697-25.41-14.721-24.241-14.12 c1.259,0.646-1.202-0.829-2.626-0.175C25.45,36.797,3.644,49.335,2.098,50.218c-1.545,0.883-2.032,1.731-2.027,2.907 c0.004,1.176-0.078,27.253,0,28.801c0.078,1.548,0.69,2.052,1.506,2.609c0.816,0.558,22.901,13.505,24.572,14.41 c1.671,0.907,2.768,0.597,3.853-0.04c1.085-0.639,22.727-13.003,23.593-13.554c0.866-0.551,1.653-1.969-0.157-2.992 c-1.811-1.022-14.779-8.693-15.279-8.943s-0.796-0.255-1.52,0.151c-0.724,0.408-7.222,4.062-8.013,4.524s-0.904,0.254-1.283,0.033 c-0.378-0.222-7.085-4.135-7.859-4.571s-0.866-0.656-0.868-1.25c-0.001-0.593-0.018-8.121,0.023-8.998 c0.04-0.877,0.165-1.074,0.962-1.548c0.797-0.474,6.695-3.978,7.166-4.293c0.47-0.315,1.459-0.345,2.231,0.108 C29.77,58.024,35.182,61.219,36.28,61.87"}),Ue=function(e){return r.a.createElement("svg",Se({version:1.1,id:"\u56fe\u5c42_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 427.3 100.4",enableBackground:"new 0 0 427.3 100.4",xmlSpace:"preserve"},e),Ne,Ie,Ae,Re,We,De,Pe,Ve)},ze=(a.p,function(e){return r.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(_e.a,{button:!0},r.a.createElement(Le.a,{primary:e.title,secondary:e.url})))}),Be=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{title:"\u5173\u4e8e"}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"}},r.a.createElement(Ue,{style:{width:"70%"}})),r.a.createElement(Te.a,null),r.a.createElement(ze,{title:"\u6e90\u4ee3\u7801",url:"https://github.com/pd4d10/cnode-pwa"}),r.a.createElement(Te.a,null),r.a.createElement(ze,{title:"\u5173\u4e8e CNode \u793e\u533a",url:"https://cnodejs.org/about"}),r.a.createElement(Te.a,null),r.a.createElement(_e.a,{button:!0},r.a.createElement(Le.a,{primary:"License",secondary:"MIT"})),r.a.createElement(Te.a,null))},He=function(){return r.a.createElement("div",null,"404")},qe=a(204),Fe=a.n(qe),Ge=Object(w.a)(function(e){return r.a.createElement(H,null,function(t){var a=t.verifyToken;return r.a.createElement(Fe.a,{onError:console.error,onScan:function(){var t=Object(C.a)(y.a.mark(function t(n){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("scan",n),n){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,a(n);case 5:t.sent&&e.history.push("/");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})})}),Je=a(5673),Qe=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.token&&this.props.fetchMessages()}},{key:"render",value:function(){var e=this;return this.props.token?r.a.createElement("div",null,r.a.createElement(X,{title:"\u6d88\u606f",rightWidget:function(){return r.a.createElement(d.f,{color:"inherit",onClick:function(){e.props.markAllAsRead()}},r.a.createElement(O.c,null))}}),this.props.unreadMessages.map(function(e){return r.a.createElement(me,Object.assign({key:e.id},e))}),this.props.readMessages.map(function(e){return r.a.createElement(me,Object.assign({key:e.id},e))})):r.a.createElement(Je.a,{to:"/login"})}}]),t}(r.a.Component),Ye=Object(w.a)(M(H)(Qe)),Ke=a(205),Xe=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:null,isLoading:!1,tabIndex:0,tabData:[[],[],[]]},a.fetchUser=Object(C.a)(y.a.mark(function e(){var t,n,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.match.params.loginname,e.next=3,Promise.all([x("/user/".concat(t)),x("/topic_collect/".concat(t))]);case 3:n=e.sent,r=Object(Ke.a)(n,2),c=r[0].data,o=r[1].data,a.setState({data:c,tabData:[c.recent_replies,c.recent_topics,o]});case 8:case"end":return e.stop()}},e,this)})),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=(t.collectData,t.isLoading);return r.a.createElement("div",null,n?r.a.createElement("div",null):a&&r.a.createElement("div",null,r.a.createElement("img",{src:a.avatar_url,alt:a.loginname}),r.a.createElement(d.k,{style:{background:"#fff"},value:this.state.tabIndex,onChange:function(t,a){e.setState({tabIndex:a})},indicatorColor:"primary",textColor:"primary",fullWidth:!0},r.a.createElement(d.j,{label:"\u6700\u8fd1\u53c2\u4e0e"}),r.a.createElement(d.j,{label:"\u6700\u8fd1\u53d1\u5e03"}),r.a.createElement(d.j,{label:"\u8bdd\u9898\u6536\u85cf"})),r.a.createElement("div",null,this.state.tabData[this.state.tabIndex].map(function(e){return r.a.createElement(oe,Object.assign({key:e.id},e))})),r.a.createElement("div",null,"-- \u6ca1\u6709\u66f4\u591a\u4e86 --")))}}]),t}(r.a.Component),Ze=Object(w.a)(Xe),$e=a(77),et=a.n($e),tt=[{id:"ask",name:"\u95ee\u7b54"},{id:"share",name:"\u5206\u4eab"},{id:"job",name:"\u62db\u8058"},{id:"dev",name:"\u5ba2\u6237\u7aef\u6d4b\u8bd5"}],at=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tab:"ask",title:"",content:"",titleErrorVisible:!1,contentErrorVisible:!1},a.handleSubmit=function(){var e=Object(C.a)(y.a.mark(function e(t){var n,r,c,o,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=a.state,r=n.tab,c=n.title,o=n.content,c&&o){e.next=5;break}return a.setState({titleErrorVisible:!c,contentErrorVisible:!o}),e.abrupt("return");case 5:return e.next=7,a.props.postTopic({tab:r,title:c,content:o});case 7:i=e.sent,a.props.history.replace("/topic/".concat(i));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleTabChange=function(e){a.setState({tab:e.target.value})},a.shouldShowTitleError=function(){return a.state.titleErrorVisible&&!a.state.title},a.shouldShowContentError=function(){return a.state.contentErrorVisible&&!a.state.content},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.shouldShowTitleError(),a=this.shouldShowContentError();return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(X,{title:"\u53d1\u5e03\u8bdd\u9898",rightWidget:function(){return r.a.createElement(d.f,{color:"inherit",type:"submit"},r.a.createElement(O.h,null))}}),r.a.createElement("div",{style:{padding:10}},r.a.createElement(d.l,{fullWidth:!0,className:et.a.control,label:"\u6807\u9898",InputLabelProps:{htmlFor:"title"},InputProps:{id:"title",value:this.state.title,onChange:function(t){e.setState({title:t.target.value})},error:t},error:t,helperText:t?"\u8bf7\u8f93\u5165\u6807\u9898":null}),r.a.createElement(d.l,{fullWidth:!0,className:et.a.control,select:!0,label:"\u5206\u533a",id:"tab",SelectProps:{native:!0,id:"tab",value:this.state.tab,onChange:this.handleTabChange}},tt.map(function(e){var t=e.id,a=e.name;return r.a.createElement("option",{key:t,value:t},a)})),r.a.createElement(d.l,{multiline:!0,rows:"10",fullWidth:!0,className:et.a.control,label:"\u5185\u5bb9",InputLabelProps:{htmlFor:"content"},InputProps:{id:"content",value:this.state.content,onChange:function(t){e.setState({content:t.target.value})},error:a},error:a,helperText:a?"\u8bf7\u8f93\u5165\u5185\u5bb9":null})))}}]),t}(r.a.Component),nt=Object(K.a)(M(H),w.a)(at),rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ct(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Q,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");rt?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ct(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):ct(t,e)})}}()},77:function(e,t,a){e.exports={control:"post_control__yZJH8"}}},[[5482,2,1]]]);
//# sourceMappingURL=main.169fe900.chunk.js.map