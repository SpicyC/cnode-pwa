(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{213:function(e,t,n){e.exports={up:"message-item_up__2s1s3"}},35:function(e,t,n){e.exports={item:"common_item__1OwAu",content:"common_content__2-hq1",title:"common_title__2bmLR"}},47:function(e,t,n){e.exports={extra:"topic_extra__2u0cT",left:"topic_left__1K78g",right:"topic_right__wpTam",tag:"topic_tag__AoLtP",timeago:"topic_timeago__3dff9"}},48:function(e,t,n){e.exports={container:"detail_container__3u9El",title:"detail_title__1ldUt",info:"detail_info__2peOv",prettyprint:"detail_prettyprint__1hqQk",extra:"detail_extra__2jv2w",tip:"detail_tip__1bcuI"}},5483:function(e,t,n){e.exports=n(5675)},5490:function(e,t,n){},5653:function(e,t,n){var a={"./ar":170,"./ar.js":170,"./be":171,"./be.js":171,"./bg":172,"./bg.js":172,"./ca":173,"./ca.js":173,"./da":174,"./da.js":174,"./de":175,"./de.js":175,"./el":176,"./el.js":176,"./en":177,"./en.js":177,"./en_short":178,"./en_short.js":178,"./es":179,"./es.js":179,"./eu":180,"./eu.js":180,"./fa":181,"./fa.js":181,"./fi":182,"./fi.js":182,"./fr":183,"./fr.js":183,"./he":184,"./he.js":184,"./hu":185,"./hu.js":185,"./in_BG":186,"./in_BG.js":186,"./in_HI":187,"./in_HI.js":187,"./in_ID":188,"./in_ID.js":188,"./it":189,"./it.js":189,"./ja":190,"./ja.js":190,"./ko":191,"./ko.js":191,"./locales":192,"./locales.js":192,"./ml":193,"./ml.js":193,"./my":194,"./my.js":194,"./nb_NO":195,"./nb_NO.js":195,"./nl":196,"./nl.js":196,"./nn_NO":197,"./nn_NO.js":197,"./pl":198,"./pl.js":198,"./pt_BR":199,"./pt_BR.js":199,"./ro":200,"./ro.js":200,"./ru":201,"./ru.js":201,"./sv":202,"./sv.js":202,"./ta":203,"./ta.js":203,"./th":204,"./th.js":204,"./tr":205,"./tr.js":205,"./uk":206,"./uk.js":206,"./vi":207,"./vi.js":207,"./zh_CN":208,"./zh_CN.js":208,"./zh_TW":209,"./zh_TW.js":209};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=5653},5675:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(27),c=n.n(o),i=(n(5488),n(5490),n(18)),s=n(19),l=n(21),u=n(20),p=n(22),m=n(28),h=n(5),d=n(44),f=n.n(d),v=n(5680),g=n(5677),b=n(112),E=n(9),j=n.n(E),y=n(66),k=n(17),O=n(5682),w=n(10),C="#80bd01",_="#80bd01";function x(e,t){return T.apply(this,arguments)}function T(){return(T=Object(k.a)(j.a.mark(function e(t,n){var a,r,o;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n&&(a.method="POST",a.headers={"Content-Type":"application/x-www-form-urlencoded"},a.body=new URLSearchParams(n).toString()),e.next=4,fetch("https://cnodejs.org/api/v1".concat(t),a);case 4:return r=e.sent,e.next=7,r.json();case 7:if((o=e.sent).success){e.next=10;break}throw new Error(o.error_msg);case 10:return e.abrupt("return",o);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var L={"/":["CNode \u793e\u533a",w.e],"/good":["\u7cbe\u534e",w.n],"/share":["\u5206\u4eab",w.l],"/ask":["\u95ee\u7b54",w.g],"/job":["\u62db\u8058",w.m],"/message":["\u6d88\u606f",w.h],"/setting":["\u8bbe\u7f6e",w.k],"/about":["\u5173\u4e8e",w.f]},M=Object.entries(L),S=(w.e,w.h,w.k,w.f,[{pathname:"/",title:"\u793e\u533a",Icon:w.e},{pathname:"/good",title:"\u7cbe\u534e",Icon:w.n},{pathname:"/share",title:"\u5206\u4eab",Icon:w.l},{pathname:"/ask",title:"\u95ee\u7b54",Icon:w.g},{pathname:"/job",title:"\u62db\u8058",Icon:w.m}]),N=["all","good","share","ask","job"],I=r.a.createContext(),A=I.Consumer,W=I.Provider,P=A,U=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,isLoadingMore:!1,topicMapper:{},topics:[[],[],[],[],[]],pages:[1,1,1,1,1],scrollYs:[0,0,0,0,0]},n.getCurrentTab=function(){return new URLSearchParams(n.props.location.search).get("tab")||"all"},n.getCurrentIndex=function(){return N.indexOf(n.getCurrentTab())},n.fetchTopics=function(){var e=Object(k.a)(j.a.mark(function e(t){var a,r,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getCurrentTab(),e.next=3,x("/topics?tab=".concat(a,"&page=").concat(t,"&limit=20"));case 3:return r=e.sent,o=r.data,c={},o.forEach(function(e){c[e.id]=e}),n.setState({topicMapper:Object(y.a)({},n.state.topicMapper,c)}),e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.setScrollY=function(e){var t=n.state.scrollYs.slice();t[N.indexOf(n.getCurrentTab())]=e,n.setState({scrollYs:t})},n.load=Object(k.a)(j.a.mark(function e(){var t,a,r,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getCurrentIndex(),a=n.state.topics.slice(),r=n.state.pages.slice(),e.prev=3,o=1,n.setState({isLoading:!0}),e.next=8,n.fetchTopics(o);case 8:c=e.sent,r[t]=o,a[t]=c,n.setState({topics:a,pages:r});case 12:return e.prev=12,n.setState({isLoading:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,,12,15]])})),n.loadMore=Object(k.a)(j.a.mark(function e(){var t,a,r,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getCurrentIndex(),a=n.state.topics.slice(),r=n.state.pages.slice(),e.prev=3,o=r[t]+1,n.setState({isLoadingMore:!0}),e.next=8,n.fetchTopics(o);case 8:c=e.sent,r[t]=o,a[t]=Object(b.a)(a[t]).concat(Object(b.a)(c)),n.setState({topics:a,pages:r});case 12:return e.prev=12,n.setState({isLoadingMore:!1}),e.finish(12);case 15:case"end":return e.stop()}},e,this,[[3,,12,15]])})),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.getCurrentIndex(),t=this.state,n=t.isLoading,a=t.isLoadingMore,o=t.topicMapper,c=this.load,i=this.loadMore,s=this.setScrollY,l=this.state.topics[e],u=this.state.scrollYs[e];return r.a.createElement(W,{value:{topics:l,scrollY:u,isLoading:n,isLoadingMore:a,load:c,loadMore:i,setScrollY:s,currentIndex:e,topicMapper:o}},this.props.children)}}]),t}(r.a.Component);U=Object(O.a)(U);var B=r.a.createContext(),D=B.Consumer,Y=B.Provider,R=D,V=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,setVisible:function(e){n.setState({visible:e})}},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(Y,{value:this.state},this.props.children)}}]),t}(r.a.Component),z=r.a.createContext(),H=z.Consumer,q=z.Provider,F=H,G=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,count:0,unreadMessages:[],readMessages:[]},n.queueAfterToken=[],n.runAfterTokenVerified=function(e){n.queueAfterToken.push(e)},n.verifyToken=function(){var e=Object(k.a)(j.a.mark(function e(t){var a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("/accesstoken",{accesstoken:t});case 3:return a=e.sent,a.id,a.loginname,a.avatar_url,n.setState({token:t}),n.fetchUnreadCount(t),localStorage.setItem("token",t),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),n.fetchUnreadCount=function(){var e=Object(k.a)(j.a.mark(function e(t){var a,r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/count?accesstoken="+t);case 2:a=e.sent,r=a.data,n.setState({count:r}),setTimeout(function(){n.fetchUnreadCount(t)},1e4);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.fetchMessages=Object(k.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/messages?accesstoken="+n.state.token);case 2:t=e.sent,a=t.data,n.setState({unreadMessages:a.hasnot_read_messages,readMessages:a.has_read_messages});case 5:case"end":return e.stop()}},e,this)})),n.markAllAsRead=Object(k.a)(j.a.mark(function e(){return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/mark_all",{accesstoken:n.state.token});case 2:n.fetchMessages();case 3:case"end":return e.stop()}},e,this)})),n.postTopic=function(){var e=Object(k.a)(j.a.mark(function e(t){var a,r,o,c;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,t.tab,r=t.content,e.next=3,x("/topics",{title:a,tab:"dev",content:r,accesstoken:n.state.token});case 3:return o=e.sent,c=o.topic_id,e.abrupt("return",c);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(j.a.mark(function e(){var t;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=4;break}return e.next=4,this.verifyToken(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.token,n=e.count,a=e.unreadMessages,o=e.readMessages,c=this.fetchUnreadCount,i=this.fetchMessages,s=this.runAfterTokenVerified,l=this.markAllAsRead,u=this.verifyToken,p=this.postTopic;return r.a.createElement(q,{value:{token:t,count:n,unreadMessages:a,readMessages:o,fetchUnreadCount:c,fetchMessages:i,runAfterTokenVerified:s,markAllAsRead:l,verifyToken:u,postTopic:p}},this.props.children)}}]),t}(r.a.Component),J=function(e){var t=e.children;return r.a.createElement(G,null,r.a.createElement(U,null,r.a.createElement(V,null,t)))},Q=function(e){return function(t){return function(n){return r.a.createElement(e,null,function(e){return r.a.createElement(t,Object.assign({},e,n))})}}},K=Object(m.createMuiTheme)({palette:{primary:h.v.teal,secondary:h.v.grey},appBar:{},floatingActionButton:{},raisedButton:{}}),Z=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(J,null,r.a.createElement(m.MuiThemeProvider,{theme:K},r.a.createElement("main",null,r.a.createElement(f.a,{titleTemplate:"%s - CNode PWA",defaultTitle:"CNode PWA"}),r.a.createElement("div",{style:{marginTop:48}},r.a.createElement(g.a,{exact:!0,path:"/",component:Oe}),r.a.createElement(g.a,{path:"/message",component:We}),r.a.createElement(g.a,{path:"/topic/:id",component:xe}),r.a.createElement(g.a,{path:"/login",component:Se}),r.a.createElement(g.a,{path:"/post",component:qe}))))))}}]),t}(r.a.Component),$=Q(F)(Z),X=n(5679),ee=Object(O.a)(function(e){var t=e.title,n=e.rightWidget,a=e.history;return r.a.createElement(h.a,{color:"default"},r.a.createElement(h.t,{variant:"dense"},r.a.createElement(h.i,{style:{marginLeft:-12,marginRight:20},onClick:function(){1===a.length?a.push("/"):a.goBack()}},r.a.createElement(w.b,null)),r.a.createElement(h.u,{variant:"title",style:{flexGrow:1}},t),r.a.createElement(n,null)))}),te=n(5678),ne=n(46),ae=n(45),re=n.n(ae),oe=(n(60),n(35)),ce=n.n(oe),ie=n(47),se=n.n(ie),le=Object(ne.b)(function(e){return r.a.createElement(h.k,{button:!0,component:te.a,to:"/topic/".concat(e.id),className:ce.a.item},r.a.createElement(pe,e.author),r.a.createElement("div",{className:ce.a.content},r.a.createElement("h3",{className:ce.a.title},e.title),r.a.createElement("div",{className:se.a.extra},r.a.createElement("div",{className:se.a.left},r.a.createElement("div",{className:se.a.tag,style:{backgroundColor:_}},e.top?"\u7f6e\u9876":e.good?"\u7cbe\u534e":{all:"CNode \u793e\u533a",good:"\u7cbe\u534e",share:"\u5206\u4eab",ask:"\u95ee\u7b54",job:"\u62db\u8058"}[e.tab]),r.a.createElement("div",{className:se.a.right},r.a.createElement("span",{style:{color:"#9e78c0"}},e.reply_count," "),"\u56de\u590d / ",r.a.createElement("span",null,e.visit_count)," \u6d4f\u89c8")),r.a.createElement(re.a,{className:se.a.timeago,datetime:e.last_reply_at,locale:"zh_CN",live:!1}))))}),ue=Object(ne.b)(function(e){return r.a.createElement("div",{style:{marginTop:8,marginBottom:8}},r.a.createElement("div",{style:{display:"flex",marginBottom:6}},r.a.createElement(pe,e.author),r.a.createElement(me,null,r.a.createElement("div",null,e.author.loginname),r.a.createElement("time",null,"\u53d1\u8868\u4e8e",r.a.createElement(re.a,{datetime:e.create_at,locale:"zh_CN",live:!1})))),r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:e.content}}),r.a.createElement(h.h,null))}),pe=Object(O.a)(function(e){var t=e.avatar_url,n=e.loginname,a=e.imgStyle,o=e.history;return r.a.createElement("img",{src:t,style:Object(y.a)({minWidth:48,width:48,height:48,borderRadius:"50%"},a),alt:n,onClick:function(e){e.preventDefault(),o.push("/user/".concat(n))}})}),me=function(e){return r.a.createElement("div",Object.assign({},e,{style:Object(y.a)({},e.style,{display:"flex",flexDirection:"column",justifyContent:"space-between",lineHeight:"24px"})}))},he=n(213),de=n.n(he),fe=function(e){return r.a.createElement(h.k,{button:!0,component:te.a,to:"/topic/".concat(e.topic.id),className:ce.a.item},r.a.createElement(pe,e.author),r.a.createElement("div",{className:ce.a.content},r.a.createElement("div",{className:de.a.up},r.a.createElement("span",{style:{color:_}},e.author.loginname)," ","\u56de\u590d\u4e86\u4f60\u7684\u8bdd\u9898"),r.a.createElement("div",{className:ce.a.title},e.topic.title)))},ve=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:12}},r.a.createElement(h.g,{size:24}))};function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var be=r.a.createElement("rect",{width:80,height:80,fill:"#444"}),Ee=r.a.createElement("path",{d:"M 39.741 72.872 C 38.882 72.872 38.025 72.647 37.273 72.212 L 29.42 67.566 C 28.248 66.91 28.819 66.678 29.207 66.543 C 30.77 66 31.088 65.875 32.758 64.929 C 32.931 64.83 33.162 64.867 33.342 64.974 L 39.375 68.556 C 39.594 68.677 39.901 68.677 40.103 68.556 L 63.625 54.979 C 63.844 54.854 63.983 54.603 63.983 54.343 L 63.983 27.196 C 63.983 26.931 63.843 26.683 63.619 26.549 L 40.106 12.984 C 39.889 12.857 39.6 12.857 39.382 12.984 L 15.878 26.552 C 15.649 26.683 15.505 26.938 15.505 27.196 L 15.505 54.342 C 15.505 54.602 15.649 54.848 15.876 54.971 L 22.318 58.693 C 25.814 60.441 27.956 58.383 27.956 56.314 L 27.956 29.514 C 27.956 29.135 28.261 28.836 28.639 28.836 L 31.622 28.836 C 31.995 28.836 32.304 29.135 32.304 29.514 L 32.304 56.314 C 32.304 60.98 29.763 63.656 25.339 63.656 C 23.979 63.656 22.909 63.656 19.921 62.184 L 13.753 58.633 C 12.229 57.751 11.286 56.105 11.286 54.342 L 11.286 27.196 C 11.286 25.433 12.228 23.786 13.753 22.909 L 37.274 9.317 C 38.763 8.476 40.742 8.476 42.218 9.317 L 65.737 22.909 C 67.261 23.791 68.209 25.433 68.209 27.196 L 68.209 54.342 C 68.209 56.105 67.262 57.745 65.737 58.633 L 42.218 72.212 C 41.466 72.647 40.611 72.872 39.741 72.872",fill:"#80bd01"}),je=r.a.createElement("path",{d:"M 47.007 54.171 C 36.713 54.171 34.558 49.446 34.558 45.484 C 34.558 45.107 34.861 44.806 35.238 44.806 L 38.279 44.806 C 38.618 44.806 38.902 45.049 38.954 45.381 C 39.413 48.478 40.782 50.039 47.008 50.039 C 51.962 50.039 54.072 48.918 54.072 46.289 C 54.072 44.774 53.474 43.649 45.773 42.895 C 39.336 42.257 35.357 40.835 35.357 35.687 C 35.357 30.942 39.357 28.111 46.064 28.111 C 53.599 28.111 57.327 30.726 57.8 36.338 C 57.818 36.531 57.748 36.717 57.619 36.861 C 57.49 36.996 57.311 37.078 57.121 37.078 L 54.069 37.078 C 53.752 37.078 53.473 36.853 53.408 36.547 C 52.677 33.289 50.895 32.248 46.063 32.248 C 40.653 32.248 40.024 34.133 40.024 35.545 C 40.024 37.256 40.766 37.754 48.071 38.721 C 55.3 39.676 58.733 41.03 58.733 46.111 C 58.733 51.236 54.459 54.171 47.007 54.171",fill:"#80bd01"}),ye=function(e){return r.a.createElement("svg",ge({x:"0px",y:"0px",viewBox:"0 0 80 80",width:512,height:512},e),be,Ee,je)},ke=(n.p,function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",dialogVisible:!1},n.loadMore=Object(X.a)(function(){var e=document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight;console.log("toBottom",e),e<96&&!n.props.isLoadingMore&&!n.props.isLoading&&n.props.loadMore()},500),n.goToPost=function(){n.props.history.push("/post")},n.goToMessage=function(){n.props.history.push("/message")},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){0===this.props.topics.length&&this.props.load(),window.addEventListener("scroll",this.loadMore)}},{key:"componentDidUpdate",value:function(e){this.props.currentIndex!==e.currentIndex&&window.scrollTo(0,this.props.scrollY),0!==this.props.topics.length||this.props.isLoading||this.props.isLoadingMore||(this.props.load(),console.log("load"))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.loadMore)}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement("div",{style:{marginBottom:48,marginTop:-48}},r.a.createElement(P,null,function(t){var n=t.setScrollY,a=t.currentIndex,o=t.load;return r.a.createElement(h.n,{square:!0,style:{position:"sticky",top:-48,zIndex:1}},r.a.createElement(h.t,{variant:"dense"},r.a.createElement(ye,{width:24,height:24}),r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(h.i,{color:"default",onClick:e.goToMessage},r.a.createElement(F,null,function(e){var t=e.count;return t?r.a.createElement(h.c,{badgeContent:t,color:"secondary"},r.a.createElement(w.h,null)):r.a.createElement(w.h,null)})),r.a.createElement(h.i,{color:"default"},r.a.createElement(w.a,null))),r.a.createElement(h.r,{style:{background:"#fff"},value:a,onChange:function(t,r){a===r?(window.scrollTo(0,0),o()):(n(window.scrollY),0===r&&e.props.history.push("/"),e.props.history.push("/?tab="+N[r]))},indicatorColor:"primary",textColor:"primary",fullWidth:!0},S.map(function(e){return r.a.createElement(h.q,{key:e.pathname,label:e.title,value:e.ids})})))}),t.isLoading&&r.a.createElement(ve,null),r.a.createElement("div",null,t.topics.map(function(e,t){return r.a.createElement(le,Object.assign({},e,{key:e.id}))})),t.isLoadingMore&&r.a.createElement(ve,null),r.a.createElement(h.f,{variant:"fab",style:{position:"fixed",bottom:16,right:16},onClick:this.goToPost},r.a.createElement(w.d,null)))}}]),t}(r.a.Component)),Oe=Object(O.a)(Q(P)(ke)),we=n(48),Ce=n.n(we),_e=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={topic:null,isLoading:!1},n.getTopicId=function(){return n.props.match.params.id},n.fetchTopic=Object(k.a)(j.a.mark(function e(){var t,a,r;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({isLoading:!0}),t=n.getTopicId(),e.next=5,x("/topic/".concat(t));case 5:a=e.sent,r=a.data,n.setState({topic:r});case 8:return e.prev=8,n.setState({isLoading:!1}),e.finish(8);case 11:case"end":return e.stop()}},e,this,[[0,,8,11]])})),n.isTopicScreen=function(e){return/^\/topic\//.test(e.location.pathname)},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.isTopicScreen(this.props)&&(!this.isTopicScreen(e)||(e.match.params.id,this.props.match.params.id))}},{key:"render",value:function(){var e=this,t=this.state;t.topic,t.isLoading,this.props.history;return r.a.createElement(P,null,function(t){var n=t.topicMapper[e.getTopicId()];return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{title:n.title}),r.a.createElement(ee,{title:"\u8bdd\u9898",rightWidget:function(){return r.a.createElement(h.i,{color:"inherit",onClick:function(){navigator.share&&navigator.share({title:n.title,text:"Hello World",url:window.location.href})}},r.a.createElement(w.l,null))}}),r.a.createElement("div",{className:Ce.a.container},r.a.createElement("div",{className:Ce.a.title},n.title),r.a.createElement("div",{className:Ce.a.info},r.a.createElement(pe,n.author),r.a.createElement("div",{className:Ce.a.extra},r.a.createElement("div",null,n.author.loginname),r.a.createElement("div",{className:Ce.a.tip},r.a.createElement("span",null,"\u521b\u5efa\u4e8e",r.a.createElement(re.a,{datetime:n.create_at,locale:"zh_CN",live:!1,style:{color:"#838383"}})),r.a.createElement("span",{style:{marginLeft:"6px"}},n.visit_count,"\u6b21\u6d4f\u89c8")))),r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:n.content}}),r.a.createElement("div",null,r.a.createElement("div",{style:{background:"#eee",padding:6}},n.reply_count?"\u5171 ".concat(n.reply_count," \u6761\u56de\u590d"):"\u6682\u65e0\u56de\u590d"),(n.replies||[]).map(function(e){return r.a.createElement(ue,Object.assign({},e,{key:e.id}))}))))})}}]),t}(r.a.Component),xe=Object(O.a)(_e);n(62),n(63),n(37);n.p;var Te=n(113),Le=(Object(O.a)(function(e){return r.a.createElement(R,null,function(t){var n=t.visible,a=t.setVisible;return r.a.createElement(h.p,{open:n,onOpen:function(){a(!0)},onClose:function(){a(!1)}},r.a.createElement(h.j,null,r.a.createElement(h.k,{button:!0},r.a.createElement(h.l,null,r.a.createElement(h.b,{src:e.avatar?e.avatar:null},e.avatar||r.a.createElement(w.i,null))),r.a.createElement(h.m,{primary:e.name||"\u70b9\u51fb\u767b\u5f55"})),r.a.createElement(h.h,null),M.map(function(t){var n=Object(Te.a)(t,2),o=n[0],c=Object(Te.a)(n[1],2),i=c[0],s=c[1];return r.a.createElement(h.k,{button:!0,component:te.a,to:o,key:o,onClick:function(){a(!1)}},r.a.createElement(h.l,null,r.a.createElement(s,{style:e.location.pathname===o?{fill:C}:{}})),r.a.createElement(h.m,{primary:i}))})))})}),n(215)),Me=n.n(Le),Se=Object(O.a)(function(e){return r.a.createElement(F,null,function(t){var n=t.verifyToken;return r.a.createElement(Me.a,{onError:console.error,onScan:function(){var t=Object(k.a)(j.a.mark(function t(a){return j.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("scan",a),a){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,n(a);case 5:t.sent&&e.history.push("/");case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()})})}),Ne=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P,null,function(t){var n=t.setScrollY,a=t.currentIndex,o=t.load;return r.a.createElement(h.d,{style:{position:"fixed",bottom:0,left:0,right:0,boxShadow:"0 -1px 4px rgba(0,0,0,.1)"},value:a,onChange:function(t,r){a===r?(window.scrollTo(0,0),o()):(n(window.scrollY),0===r&&e.props.history.push("/"),e.props.history.push("/?tab="+N[r]))}},S.map(function(e){var t=e.title,n=e.Icon;return r.a.createElement(h.e,{showLabel:!0,key:t,label:t,icon:r.a.createElement(n,null),style:{minWidth:0}})}))})}}]),t}(r.a.Component),Ie=(Object(O.a)(Ne),n(5681)),Ae=function(e){function t(){return Object(i.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.token&&this.props.fetchMessages()}},{key:"render",value:function(){var e=this;return this.props.token?r.a.createElement("div",null,r.a.createElement(ee,{title:"\u6d88\u606f",rightWidget:function(){return r.a.createElement(h.i,{color:"inherit",onClick:function(){e.props.markAllAsRead()}},r.a.createElement(w.c,null))}}),this.props.unreadMessages.map(function(e){return r.a.createElement(fe,Object.assign({key:e.id},e))}),this.props.readMessages.map(function(e){return r.a.createElement(fe,Object.assign({key:e.id},e))})):r.a.createElement(Ie.a,{to:"/login"})}}]),t}(r.a.Component),We=Object(O.a)(Q(F)(Ae)),Pe=n(78),Ue=n.n(Pe),Be=n(64),De=n.n(Be),Ye=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:null,isLoading:!1},n.fetchUser=Object(k.a)(j.a.mark(function e(){var t,a;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/user/".concat(n.props.params.name));case 2:t=e.sent,a=t.data,n.setState({data:a});case 5:case"end":return e.stop()}},e,this)})),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"render",value:function(){var e=this.state,t=e.data,n=e.isLoading;return r.a.createElement("div",null,n?r.a.createElement("div",null):t&&r.a.createElement("div",null,r.a.createElement("img",{src:t.avatar_url,alt:t.loginname}),r.a.createElement(Ue.a,null,r.a.createElement(De.a,{label:"\u8fd1\u671f\u5e16\u5b50"},r.a.createElement("ul",null,t.recent_topics.map(function(e){return r.a.createElement(le,null)}))),r.a.createElement(De.a,{label:"\u8fd1\u671f\u53c2\u4e0e"},r.a.createElement("ul",null,t.recent_replies.map(function(e){return r.a.createElement(le,null)}))))))}}]),t}(r.a.Component),Re=(Object(O.a)(Ye),n(81)),Ve=n.n(Re),ze=[{id:"ask",name:"\u95ee\u7b54"},{id:"share",name:"\u5206\u4eab"},{id:"job",name:"\u62db\u8058"},{id:"dev",name:"\u5ba2\u6237\u7aef\u6d4b\u8bd5"}],He=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tab:"ask",title:"",content:"",titleErrorVisible:!1,contentErrorVisible:!1},n.handleSubmit=function(){var e=Object(k.a)(j.a.mark(function e(t){var a,r,o,c,i;return j.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.tab,o=a.title,c=a.content,o&&c){e.next=5;break}return n.setState({titleErrorVisible:!o,contentErrorVisible:!c}),e.abrupt("return");case 5:return e.next=7,n.props.postTopic({tab:r,title:o,content:c});case 7:i=e.sent,n.props.history.replace("/topic/".concat(i));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleTabChange=function(e){n.setState({tab:e.target.value})},n.shouldShowTitleError=function(){return n.state.titleErrorVisible&&!n.state.title},n.shouldShowContentError=function(){return n.state.contentErrorVisible&&!n.state.content},n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.shouldShowTitleError(),n=this.shouldShowContentError();return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(ee,{title:"\u53d1\u5e03\u8bdd\u9898",rightWidget:function(){return r.a.createElement(h.i,{color:"inherit",type:"submit"},r.a.createElement(w.j,null))}}),r.a.createElement("div",{style:{padding:10}},r.a.createElement(h.s,{fullWidth:!0,className:Ve.a.control,label:"\u6807\u9898",InputLabelProps:{htmlFor:"title"},InputProps:{id:"title",value:this.state.title,onChange:function(t){e.setState({title:t.target.value})},error:t},error:t,helperText:t?"\u8bf7\u8f93\u5165\u6807\u9898":null}),r.a.createElement(h.s,{fullWidth:!0,className:Ve.a.control,select:!0,label:"\u5206\u533a",id:"tab",SelectProps:{native:!0,id:"tab",value:this.state.tab,onChange:this.handleTabChange}},ze.map(function(e){var t=e.id,n=e.name;return r.a.createElement("option",{key:t,value:t},n)})),r.a.createElement(h.s,{multiline:!0,rows:"10",fullWidth:!0,className:Ve.a.control,label:"\u5185\u5bb9",InputLabelProps:{htmlFor:"content"},InputProps:{id:"content",value:this.state.content,onChange:function(t){e.setState({content:t.target.value})},error:n},error:n,helperText:n?"\u8bf7\u8f93\u5165\u5185\u5bb9":null})))}}]),t}(r.a.Component),qe=Object(ne.a)(Q(F),O.a)(He),Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available; please refresh."),t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(r.a.createElement($,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Fe?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ge(t,e)})}}()},60:function(e,t){},81:function(e,t,n){e.exports={control:"post_control__yZJH8"}}},[[5483,2,1]]]);
//# sourceMappingURL=main.b84d3dfb.chunk.js.map