(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{205:function(e,t,n){e.exports={up:"message-item_up__2s1s3"}},206:function(e,t,n){e.exports={title:"styled_title__2jMIs"}},207:function(e,t,n){e.exports={text:"no-more_text__1j8RK"}},209:function(e,t,n){e.exports={time:"timeago_time__38x-W"}},39:function(e,t,n){e.exports={extra:"topic_extra__2u0cT",left:"topic_left__1K78g",right:"topic_right__wpTam",tag:"topic_tag__AoLtP"}},5487:function(e,t,n){e.exports=n(5694)},5492:function(e,t,n){},5672:function(e,t,n){var a={"./ar":163,"./ar.js":163,"./be":164,"./be.js":164,"./bg":165,"./bg.js":165,"./ca":166,"./ca.js":166,"./da":167,"./da.js":167,"./de":168,"./de.js":168,"./el":169,"./el.js":169,"./en":170,"./en.js":170,"./en_short":171,"./en_short.js":171,"./es":172,"./es.js":172,"./eu":173,"./eu.js":173,"./fa":174,"./fa.js":174,"./fi":175,"./fi.js":175,"./fr":176,"./fr.js":176,"./he":177,"./he.js":177,"./hu":178,"./hu.js":178,"./in_BG":179,"./in_BG.js":179,"./in_HI":180,"./in_HI.js":180,"./in_ID":181,"./in_ID.js":181,"./it":182,"./it.js":182,"./ja":183,"./ja.js":183,"./ko":184,"./ko.js":184,"./locales":185,"./locales.js":185,"./ml":186,"./ml.js":186,"./my":187,"./my.js":187,"./nb_NO":188,"./nb_NO.js":188,"./nl":189,"./nl.js":189,"./nn_NO":190,"./nn_NO.js":190,"./pl":191,"./pl.js":191,"./pt_BR":192,"./pt_BR.js":192,"./ro":193,"./ro.js":193,"./ru":194,"./ru.js":194,"./sv":195,"./sv.js":195,"./ta":196,"./ta.js":196,"./th":197,"./th.js":197,"./tr":198,"./tr.js":198,"./uk":199,"./uk.js":199,"./vi":200,"./vi.js":200,"./zh_CN":201,"./zh_CN.js":201,"./zh_TW":202,"./zh_TW.js":202};function r(e){var t=c(e);return n(t)}function c(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=c,e.exports=r,r.id=5672},5694:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(25),o=n.n(c),i=(n(5492),n(17)),l=n(18),s=n(20),u=n(19),m=n(21),p=n(27),d=n(4),h=n(46),f=n.n(h),v=n(5700),b=n(5701),E=n(5696),g=n(110),j=n(6),y=n.n(j),k=n(16),w=n(5702),_=n(22),O="#80bd01";function x(e,t){return C.apply(this,arguments)}function C(){return(C=Object(k.a)(y.a.mark(function e(t,n){var a,r,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={},n&&(a.method="POST",a.headers={"Content-Type":"application/x-www-form-urlencoded"},a.body=new URLSearchParams(n).toString()),e.next=4,fetch("https://cnodejs.org/api/v1".concat(t),a);case 4:return r=e.sent,e.next=7,r.json();case 7:if((c=e.sent).success){e.next=10;break}throw new Error(c.error_msg);case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var S=function(e){return function(t){return function(n){return r.a.createElement(e,null,function(e){return r.a.createElement(t,Object.assign({},e,n))})}}},L=[{id:"all",title:"\u5168\u90e8",Icon:_.e},{id:"good",title:"\u7cbe\u534e",Icon:_.k},{id:"share",title:"\u5206\u4eab",Icon:_.i},{id:"ask",title:"\u95ee\u7b54",Icon:_.f},{id:"job",title:"\u62db\u8058",Icon:_.j}];function T(e){return new URLSearchParams(e.search).get("tab")||"all"}var M=r.a.createContext(),N=M.Consumer,A=M.Provider,I=N,R=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={isLoading:!1,isLoadingMore:!1,topics:[],page:1},n.fetchTopics=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,r,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=T(n.props.location),e.next=3,x("/topics?tab=".concat(a,"&page=").concat(t,"&limit=20"));case 3:return r=e.sent,c=r.data,e.abrupt("return",c);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.load=Object(k.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=1,n.setState({isLoading:!0}),e.next=5,n.fetchTopics(t);case 5:a=e.sent,n.setState({topics:a,page:t});case 7:return e.prev=7,n.setState({isLoading:!1}),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[0,,7,10]])})),n.loadMore=Object(k.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=n.state.page+1,n.setState({isLoadingMore:!0}),e.next=5,n.fetchTopics(t);case 5:a=e.sent,n.setState({topics:Object(g.a)(n.state.topics).concat(Object(g.a)(a)),page:t});case 7:return e.prev=7,n.setState({isLoadingMore:!1}),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[0,,7,10]])})),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isLoadingMore,a=e.topics,c=this.load,o=this.loadMore;return r.a.createElement(A,{value:{topics:a,isLoading:t,isLoadingMore:n,load:c,loadMore:o}},this.props.children)}}]),t}(r.a.Component);R=Object(w.a)(R);var V=r.a.createContext(),W=V.Consumer,D=V.Provider,U=W,P=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={visible:!1,message:""},n.setVisible=function(e){n.setState({visible:e})},n.show=function(e){n.setState({visible:!0,message:e})},n.hide=function(){n.setState({visible:!1})},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state,t=e.visible,n=e.message,a=this.setVisible,c=this.show,o=this.hide;return r.a.createElement(D,{value:{visible:t,message:n,setVisible:a,show:c,hide:o}},this.props.children)}}]),t}(r.a.Component),B=r.a.createContext(),z=B.Consumer,H=B.Provider,F=z,G=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={token:null,loginname:null,count:0},n.queueAfterToken=[],n.runAfterTokenVerified=function(e){n.queueAfterToken.push(e)},n.verifyToken=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x("/accesstoken",{accesstoken:t});case 3:return a=e.sent,a.id,r=a.loginname,a.avatar_url,n.setState({token:t,loginname:r}),n.fetchUnreadCount(t),localStorage.setItem("token",t),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this,[[0,13]])}));return function(t){return e.apply(this,arguments)}}(),n.fetchUnreadCount=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/count?accesstoken="+t);case 2:a=e.sent,r=a.data,n.setState({count:r}),setTimeout(function(){n.fetchUnreadCount(t)},1e4);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.fetchMessages=Object(k.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/messages?accesstoken="+n.state.token);case 2:return t=e.sent,a=t.data,e.abrupt("return",a);case 5:case"end":return e.stop()}},e,this)})),n.markAllAsRead=Object(k.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("/message/mark_all",{accesstoken:n.state.token});case 2:case"end":return e.stop()}},e,this)})),n.postTopic=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.title,t.tab,r=t.content,e.next=3,x("/topics",{title:a,tab:"dev",content:r,accesstoken:n.state.token});case 3:return c=e.sent,o=c.topic_id,e.abrupt("return",o);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=Object(k.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("token"))){e.next=4;break}return e.next=4,this.verifyToken(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.token,n=e.loginname,a=e.count,c=this.fetchUnreadCount,o=this.fetchMessages,i=this.runAfterTokenVerified,l=this.markAllAsRead,s=this.verifyToken,u=this.postTopic;return r.a.createElement(H,{value:{token:t,loginname:n,count:a,fetchUnreadCount:c,fetchMessages:o,runAfterTokenVerified:i,markAllAsRead:l,verifyToken:s,postTopic:u}},this.props.children)}}]),t}(r.a.Component),J=function(e){var t=e.children;return r.a.createElement(G,null,r.a.createElement(R,null,r.a.createElement(P,null,t)))},q=Object(p.createMuiTheme)({palette:{primary:d.p.teal,secondary:d.p.grey},appBar:{},floatingActionButton:{},raisedButton:{}}),K=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return r.a.createElement(v.a,null,r.a.createElement(J,null,r.a.createElement(p.MuiThemeProvider,{theme:q},r.a.createElement("main",null,r.a.createElement(f.a,{titleTemplate:"%s - CNode\u793e\u533a"}),r.a.createElement("div",{style:{marginTop:48}},r.a.createElement(b.a,null,r.a.createElement(E.a,{exact:!0,path:"/",component:Be}),r.a.createElement(E.a,{path:"/message",component:Ye}),r.a.createElement(E.a,{path:"/topic/:id",component:Fe}),r.a.createElement(E.a,{path:"/login",component:Xe}),r.a.createElement(E.a,{path:"/post",component:ot}),r.a.createElement(E.a,{path:"/about",component:Je}),r.a.createElement(E.a,{path:"/user/:loginname",component:tt}),r.a.createElement(E.a,{component:qe}))),r.a.createElement(it,null)))))}}]),t}(r.a.Component),Q=S(F)(K),X=n(5698),Z=n(33),$=n(214);function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var ee=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M127.987,52.994c0-1.084-0.57-2.08-1.506-2.617l-24.937-14.352 c-0.422-0.248-0.895-0.377-1.373-0.396h-0.258c-0.477,0.019-0.949,0.148-1.377,0.396L73.598,50.377 c-0.929,0.537-1.508,1.533-1.508,2.617l0.055,38.644c0,0.538,0.279,1.038,0.752,1.301c0.463,0.278,1.035,0.278,1.496,0l14.821-8.485 c0.937-0.558,1.507-1.539,1.507-2.613V63.784c0-1.076,0.571-2.071,1.504-2.606l6.311-3.636c0.47-0.271,0.984-0.404,1.51-0.404 c0.513,0,1.041,0.133,1.498,0.404l6.308,3.636c0.934,0.535,1.506,1.53,1.506,2.606V81.84c0,1.074,0.578,2.062,1.51,2.613 l14.816,8.485c0.465,0.278,1.045,0.278,1.506,0c0.459-0.263,0.748-0.763,0.748-1.301L127.987,52.994z"}),te=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M261.147-0.129c-0.467-0.26-1.037-0.254-1.498,0.016 c-0.46,0.271-0.743,0.765-0.743,1.299v38.271c0,0.376-0.201,0.724-0.525,0.913c-0.326,0.188-0.729,0.188-1.056,0l-6.246-3.599 c-0.932-0.537-2.077-0.536-3.01,0.001L223.122,51.17c-0.933,0.537-1.506,1.532-1.506,2.607v28.801c0,1.076,0.573,2.07,1.505,2.609 l24.946,14.408c0.934,0.539,2.081,0.539,3.014,0l24.95-14.408c0.933-0.539,1.506-1.533,1.506-2.609V10.786 c0-1.092-0.591-2.099-1.545-2.631L261.147-0.129z M258.833,73.115c0,0.27-0.145,0.519-0.378,0.651l-8.564,4.938 c-0.233,0.135-0.521,0.135-0.752,0l-8.566-4.938c-0.232-0.133-0.377-0.382-0.377-0.651v-9.891c0-0.269,0.145-0.517,0.376-0.651 l8.566-4.947c0.232-0.135,0.52-0.135,0.754,0l8.564,4.947c0.232,0.135,0.377,0.383,0.377,0.651V73.115z"}),ne=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M350.4,62.966c0.928-0.539,1.499-1.531,1.499-2.604v-6.979 c0-1.073-0.571-2.066-1.5-2.605l-24.787-14.392c-0.934-0.542-2.084-0.543-3.02-0.004l-24.938,14.397 c-0.933,0.539-1.506,1.533-1.506,2.609v28.793c0,1.083,0.58,2.081,1.521,2.616l24.783,14.122c0.914,0.522,2.034,0.527,2.954,0.018 l14.989-8.332c0.477-0.266,0.772-0.765,0.774-1.308c0.004-0.543-0.285-1.046-0.755-1.315L315.32,73.576 c-0.47-0.268-0.758-0.767-0.758-1.306v-9.024c0-0.538,0.287-1.036,0.755-1.304l7.811-4.504c0.464-0.268,1.039-0.268,1.503,0 l7.815,4.504c0.467,0.268,0.754,0.766,0.754,1.304v7.101c0,0.538,0.288,1.036,0.755,1.306c0.467,0.269,1.042,0.267,1.508-0.003 L350.4,62.966z"}),ae=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M173.35,36.23c0.932-0.538,2.08-0.538,3.012,0l24.943,14.395 c0.934,0.537,1.508,1.532,1.508,2.609v28.811c0,1.077-0.574,2.071-1.506,2.61l-24.944,14.405c-0.933,0.538-2.081,0.538-3.014,0 l-24.938-14.405c-0.932-0.539-1.506-1.533-1.506-2.61V53.233c0-1.076,0.574-2.071,1.507-2.608L173.35,36.23z"}),re=r.a.createElement("path",{fill:"#80bd01",d:"M398.833,99.472c-0.859,0-1.716-0.225-2.468-0.66l-7.853-4.646c-1.172-0.656-0.601-0.888-0.213-1.023 c1.563-0.543,1.881-0.668,3.551-1.614c0.173-0.099,0.404-0.062,0.584,0.045l6.033,3.582c0.219,0.121,0.526,0.121,0.728,0 l23.522-13.577c0.219-0.125,0.358-0.376,0.358-0.636V53.796c0-0.265-0.14-0.513-0.364-0.647l-23.513-13.565 c-0.217-0.127-0.506-0.127-0.724,0L374.97,53.152c-0.229,0.131-0.373,0.386-0.373,0.644v27.146c0,0.26,0.144,0.506,0.371,0.629 l6.442,3.722c3.496,1.748,5.638-0.31,5.638-2.379v-26.8c0-0.379,0.305-0.678,0.683-0.678h2.983c0.373,0,0.682,0.299,0.682,0.678 v26.8c0,4.666-2.541,7.342-6.965,7.342c-1.36,0-2.43,0-5.418-1.472l-6.168-3.551c-1.524-0.882-2.467-2.528-2.467-4.291V53.796 c0-1.763,0.942-3.41,2.467-4.287l23.521-13.592c1.489-0.841,3.468-0.841,4.944,0l23.519,13.592c1.524,0.882,2.472,2.524,2.472,4.287 v27.146c0,1.763-0.947,3.403-2.472,4.291L401.31,98.812C400.558,99.247,399.703,99.472,398.833,99.472"}),ce=r.a.createElement("path",{fill:"#80bd01",d:"M406.099,80.771c-10.294,0-12.449-4.725-12.449-8.687c0-0.377,0.303-0.678,0.68-0.678h3.041 c0.339,0,0.623,0.243,0.675,0.575c0.459,3.097,1.828,4.658,8.054,4.658c4.954,0,7.064-1.121,7.064-3.75 c0-1.515-0.598-2.64-8.299-3.394c-6.437-0.638-10.416-2.06-10.416-7.208c0-4.745,4-7.576,10.707-7.576 c7.535,0,11.263,2.615,11.736,8.227c0.018,0.193-0.052,0.379-0.181,0.523c-0.129,0.135-0.308,0.217-0.498,0.217h-3.052 c-0.317,0-0.596-0.225-0.661-0.531c-0.731-3.258-2.513-4.299-7.345-4.299c-5.41,0-6.039,1.885-6.039,3.297 c0,1.711,0.742,2.209,8.047,3.176c7.229,0.955,10.662,2.309,10.662,7.39C417.825,77.836,413.551,80.771,406.099,80.771"}),oe=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M323.735,61.618c0.179-0.104,0.398-0.104,0.577,0l4.787,2.762 c0.18,0.103,0.289,0.294,0.289,0.5v5.527c0,0.207-0.109,0.397-0.289,0.501l-4.787,2.763c-0.179,0.103-0.398,0.103-0.577,0 l-4.783-2.763c-0.18-0.104-0.289-0.294-0.289-0.501V64.88c0-0.206,0.109-0.397,0.289-0.5L323.735,61.618z"}),ie=r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M36.28,61.87c1.098,0.65,1.358,0.255,1.742,0.035 c0.385-0.221,14.695-8.411,15.606-8.857c0.912-0.446,1.315-1.915,0.114-2.61c-1.201-0.697-25.41-14.721-24.241-14.12 c1.259,0.646-1.202-0.829-2.626-0.175C25.45,36.797,3.644,49.335,2.098,50.218c-1.545,0.883-2.032,1.731-2.027,2.907 c0.004,1.176-0.078,27.253,0,28.801c0.078,1.548,0.69,2.052,1.506,2.609c0.816,0.558,22.901,13.505,24.572,14.41 c1.671,0.907,2.768,0.597,3.853-0.04c1.085-0.639,22.727-13.003,23.593-13.554c0.866-0.551,1.653-1.969-0.157-2.992 c-1.811-1.022-14.779-8.693-15.279-8.943s-0.796-0.255-1.52,0.151c-0.724,0.408-7.222,4.062-8.013,4.524s-0.904,0.254-1.283,0.033 c-0.378-0.222-7.085-4.135-7.859-4.571s-0.866-0.656-0.868-1.25c-0.001-0.593-0.018-8.121,0.023-8.998 c0.04-0.877,0.165-1.074,0.962-1.548c0.797-0.474,6.695-3.978,7.166-4.293c0.47-0.315,1.459-0.345,2.231,0.108 C29.77,58.024,35.182,61.219,36.28,61.87"}),le=function(e){return r.a.createElement("svg",Y({version:1.1,id:"\u56fe\u5c42_1",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 427.3 100.4",enableBackground:"new 0 0 427.3 100.4",xmlSpace:"preserve"},e),ee,te,ne,ae,re,ce,oe,ie)},se=(n.p,{background:"#fff",boxShadow:"0px 2px 4px 0px rgba(0, 0, 0, 0.2)"}),ue=function(e){var t=e.title,n=e.rightWidget;return r.a.createElement(d.a,{color:"default",style:se},r.a.createElement(d.n,{variant:"dense",disableGutters:!0},r.a.createElement(E.a,null,function(e){var t=e.history;return r.a.createElement(d.f,{onClick:function(){1===t.length?t.push("/"):t.goBack()}},r.a.createElement(_.b,null))}),r.a.createElement(d.o,{variant:"title",color:"textSecondary",style:{flexGrow:1}},t),n&&r.a.createElement(n,null)))},me=function(){return r.a.createElement(E.a,null,function(e){var t=e.history,n=e.location;return r.a.createElement(d.a,{color:"default",position:"sticky",style:Object($.a)({},se,{top:-48})},r.a.createElement(d.n,{variant:"dense",disableGutters:!0},r.a.createElement(d.f,null,r.a.createElement(le,{height:24})),r.a.createElement(d.o,{variant:"title",color:"textSecondary",style:{flexGrow:1}},""),r.a.createElement(F,null,function(e){var n=e.count,a=e.loginname;return r.a.createElement(r.a.Fragment,null," ",r.a.createElement(d.f,{color:"default",onClick:function(){t.push("/message")}},n?r.a.createElement(d.b,{badgeContent:n,color:"secondary"},r.a.createElement(_.g,null)):r.a.createElement(_.g,null)),r.a.createElement(d.f,{color:"default",onClick:function(){t.push(a?"/user/".concat(a):"/login")}},r.a.createElement(_.a,null)))})),r.a.createElement(d.l,{style:{background:"#fff"},value:T(n),onChange:function(e,n){t.push("all"===n?"/":"/?tab="+n)},indicatorColor:"primary",textColor:"primary",fullWidth:!0},L.map(function(e){var t=e.id,n=e.title;return r.a.createElement(d.k,{key:t,label:n,value:t})})))})},pe=n(5697),de=n(58),he=n.n(de),fe=n(39),ve=n.n(fe),be=Object(Z.b)(function(e){return r.a.createElement(d.g,{button:!0,component:pe.a,to:"/topic/".concat(e.id),className:he.a.link},r.a.createElement(we,{author:e.author},r.a.createElement(Te,null,e.title),r.a.createElement("div",{className:ve.a.extra},r.a.createElement("div",{className:ve.a.left},r.a.createElement("div",{className:ve.a.tag,style:{backgroundColor:O}},e.top?"\u7f6e\u9876":e.good?"\u7cbe\u534e":{share:"\u5206\u4eab",ask:"\u95ee\u7b54",job:"\u62db\u8058"}[e.tab]),r.a.createElement("div",{className:ve.a.right},r.a.createElement("span",{style:{color:"#9e78c0"}},e.reply_count," "),"\u56de\u590d / ",r.a.createElement("span",null,e.visit_count)," \u6d4f\u89c8")),r.a.createElement(Ue,{time:e.last_reply_at}))))}),Ee=function(e){return r.a.createElement(d.g,{button:!0,component:pe.a,to:"/topic/".concat(e.id),className:he.a.item},r.a.createElement(we,{author:e.author},r.a.createElement(Te,null,e.title),r.a.createElement("div",{className:ve.a.extra},r.a.createElement("div",{className:ve.a.left},e.author.loginname),r.a.createElement(Ue,{time:e.last_reply_at}))))},ge=function(e){return r.a.createElement("div",{style:{marginTop:8,marginBottom:8}},r.a.createElement("div",{style:{display:"flex",marginBottom:6}},r.a.createElement(we,{author:e.author},r.a.createElement("div",null,e.author.loginname),r.a.createElement(Ue,{text:"\u53d1\u5e03\u4e8e",time:e.create_at}))),r.a.createElement("div",{className:"markdown-body",dangerouslySetInnerHTML:{__html:e.content}}),r.a.createElement(d.e,null))},je=n(213),ye=n(75),ke=n.n(ye),we=function(e){var t=e.author,n=e.children,a=Object(je.a)(e,["author","children"]);return r.a.createElement("div",Object.assign({className:ke.a.container},a),r.a.createElement(E.a,null,function(e){var n=e.history;return r.a.createElement("img",{src:t.avatar_url,className:ke.a.avatar,alt:t.loginname,onClick:function(e){e.preventDefault(),n.push("/user/".concat(t.loginname))}})}),r.a.createElement("div",{className:ke.a.content},n))},_e=n(205),Oe=n.n(_e),xe=function(e){return r.a.createElement(d.g,{button:!0,component:pe.a,to:"/topic/".concat(e.topic.id),className:he.a.item,style:e.has_read?{}:{background:"#f4fcf0"}},r.a.createElement(we,{author:e.author},r.a.createElement("div",{className:Oe.a.up},r.a.createElement("span",{style:{color:O}},e.author.loginname)," ","\u56de\u590d\u4e86\u4f60\u7684\u8bdd\u9898"),r.a.createElement(Te,null,e.topic.title)))},Ce=function(){return r.a.createElement("div",{style:{display:"flex",justifyContent:"center",padding:24}},r.a.createElement(d.d,{size:36}))},Se=n(206),Le=n.n(Se),Te=function(e){return r.a.createElement("h3",Object.assign({className:Le.a.title},e))},Me=n(207),Ne=n.n(Me),Ae=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:Ne.a.text},"--- \u6ca1\u6709\u66f4\u591a\u4e86 ---")}}]),t}(r.a.Component),Ie=function(e){var t=e.text;return r.a.createElement(U,null,function(e){var n=e.show;return r.a.createElement(d.f,{color:"default",onClick:function(){navigator.share?navigator.share({title:t,text:t,url:window.location.href}):(!function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}(window.location.href),n("\u94fe\u63a5\u5df2\u590d\u5236\u81f3\u526a\u8d34\u677f"))}},r.a.createElement(_.i,null))})},Re=n(208),Ve=n.n(Re),We=n(209),De=n.n(We),Ue=function(e){var t=e.text,n=e.time;return r.a.createElement("span",{className:De.a.time},t,r.a.createElement(Ve.a,{datetime:n,locale:"zh_CN",live:!1}))},Pe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={title:"",content:"",dialogVisible:!1},n.loadMore=Object(X.a)(function(){document.documentElement.scrollHeight-document.documentElement.scrollTop-document.documentElement.clientHeight<120&&!n.props.isLoadingMore&&!n.props.isLoading&&n.props.loadMore()},500),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){0===this.props.topics.length&&this.props.load(),window.addEventListener("scroll",this.loadMore)}},{key:"componentDidUpdate",value:function(e){this.props.location.key===e.location.key||"/"!==this.props.location.pathname||"/"!==e.location.pathname||this.props.isLoading||this.props.isLoadingMore||(console.log("reload"),this.props.load())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.loadMore)}},{key:"render",value:function(){var e=this,t=this.props;return r.a.createElement("div",{style:{marginBottom:84,marginTop:-48}},r.a.createElement(me,null),t.isLoading?r.a.createElement(Ce,null):r.a.createElement("div",null,t.topics.map(function(e,t){return r.a.createElement(be,Object.assign({},e,{key:e.id}))})),t.isLoadingMore&&r.a.createElement(Ce,null),r.a.createElement(d.c,{variant:"fab",style:{position:"fixed",bottom:16,right:16},onClick:function(){e.props.history.push("/post")}},r.a.createElement(_.d,null)))}}]),t}(r.a.Component),Be=Object(Z.a)(w.a,S(I))(Pe),ze=(n(5674),n(76)),He=n.n(ze),Fe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={topic:null,isLoading:!1},n.fetchTopic=Object(k.a)(y.a.mark(function e(){var t,a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n.setState({isLoading:!0}),e.next=4,x("/topic/".concat(n.props.match.params.id));case 4:t=e.sent,a=t.data,n.setState({topic:a});case 7:return e.prev=7,n.setState({isLoading:!1}),e.finish(7);case 10:case"end":return e.stop()}},e,this,[[0,,7,10]])})),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchTopic()}},{key:"render",value:function(){var e=this.state.topic;return r.a.createElement(r.a.Fragment,null,e&&r.a.createElement(f.a,{title:e.title}),r.a.createElement(ue,{title:"\u8bdd\u9898",rightWidget:function(){return r.a.createElement(Ie,{text:e?e.title:""})}}),e?r.a.createElement("div",{className:He.a.container},r.a.createElement("div",{className:He.a.title},e.title),r.a.createElement(we,{author:e.author},r.a.createElement("div",null,e.author.loginname),r.a.createElement("div",{className:He.a.tip},r.a.createElement(Ue,{text:"\u53d1\u5e03\u4e8e",time:e.create_at}),r.a.createElement("span",{style:{marginLeft:12}},e.visit_count,"\u6b21\u6d4f\u89c8"))),r.a.createElement("div",{style:{marginTop:12},className:"markdown-body",dangerouslySetInnerHTML:{__html:e.content}}),r.a.createElement("div",null,r.a.createElement("div",{style:{background:"#eee",padding:6}},e.reply_count?"\u5171 ".concat(e.reply_count," \u6761\u56de\u590d"):"\u6682\u65e0\u56de\u590d"),e.replies.map(function(e){return r.a.createElement(ge,Object.assign({},e,{key:e.id}))}),r.a.createElement(Ae,null))):r.a.createElement(Ce,null))}}]),t}(r.a.Component),Ge=function(e){return r.a.createElement(d.g,{button:!0,component:"a",href:e.url,target:"_blank",rel:"noopener noreferrer"},r.a.createElement(d.h,{primary:e.title,secondary:e.url}))},Je=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{title:"\u5173\u4e8e"}),r.a.createElement(ue,{title:"\u5173\u4e8e"}),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px 0"}},r.a.createElement(le,{style:{width:"70%"}})),r.a.createElement(d.e,null),r.a.createElement(Ge,{title:"\u6e90\u4ee3\u7801",url:"https://github.com/pd4d10/cnode-pwa"}),r.a.createElement(d.e,null),r.a.createElement(Ge,{title:"\u5173\u4e8e CNode \u793e\u533a",url:"https://cnodejs.org/about"}),r.a.createElement(d.e,null),r.a.createElement(d.g,{button:!0},r.a.createElement(d.h,{primary:"License",secondary:"MIT"})),r.a.createElement(d.e,null))},qe=function(){return r.a.createElement("div",null,"404")},Ke=n(211),Qe=n.n(Ke),Xe=function(e){return r.a.createElement(F,null,function(e){var t=e.verifyToken;return r.a.createElement(E.a,null,function(e){var n=e.history;return r.a.createElement(Qe.a,{onError:console.error,onScan:function(){var e=Object(k.a)(y.a.mark(function e(a){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("scan",a),a){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t(a);case 5:e.sent&&n.push("/");case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()})})})},Ze=n(5699),$e=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={unread:[],read:[],isLoading:!1},n.updateMessages=Object(k.a)(y.a.mark(function e(){var t;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({isLoading:!0}),e.prev=1,e.next=4,n.props.fetchMessages();case 4:t=e.sent,n.setState({unread:t.hasnot_read_messages,read:t.has_read_messages});case 6:return e.prev=6,n.setState({isLoading:!1}),e.finish(6);case 9:case"end":return e.stop()}},e,this,[[1,,6,9]])})),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.props.token&&this.updateMessages()}},{key:"render",value:function(){var e=this;return this.props.token?r.a.createElement("div",null,r.a.createElement(U,null,function(t){var n=t.show;return r.a.createElement(ue,{title:"\u6d88\u606f",rightWidget:function(){return r.a.createElement(d.f,{color:"default",onClick:Object(k.a)(y.a.mark(function t(){return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.markAllAsRead();case 2:return n("\u5df2\u6807\u8bb0\u5168\u90e8\u6d88\u606f\u4e3a\u5df2\u8bfb"),t.next=5,e.updateMessages();case 5:case"end":return t.stop()}},t,this)}))},r.a.createElement(_.c,null))}})}),this.state.isLoading?r.a.createElement(Ce,null):r.a.createElement(r.a.Fragment,null,this.state.unread.map(function(e){return r.a.createElement(xe,Object.assign({key:e.id},e))}),this.state.read.map(function(e){return r.a.createElement(xe,Object.assign({key:e.id},e))}),r.a.createElement(Ae,null))):r.a.createElement(Ze.a,{to:"/login"})}}]),t}(r.a.Component),Ye=S(F)($e),et=n(212),tt=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={data:null,tabIndex:0,tabData:[[],[],[]]},n.fetchUser=Object(k.a)(y.a.mark(function e(){var t,a,r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.match.params.loginname,e.next=3,Promise.all([x("/user/".concat(t)),x("/topic_collect/".concat(t))]);case 3:a=e.sent,r=Object(et.a)(a,2),c=r[0].data,o=r[1].data,n.setState({data:c,tabData:[c.recent_replies,c.recent_topics,o]});case 8:case"end":return e.stop()}},e,this)})),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.fetchUser()}},{key:"componentDidUpdate",value:function(e){e.match.params!==this.props.match.params&&this.fetchUser()}},{key:"render",value:function(){var e=this,t=this.state,n=t.data;t.collectData;return r.a.createElement("div",null,r.a.createElement(ue,{title:"\u7528\u6237",rightWidget:function(){return r.a.createElement(Ie,{text:n?n.loginname:""})}}),n?r.a.createElement("div",null,r.a.createElement(we,{author:n,style:{padding:16}},r.a.createElement("div",null,n.loginname),r.a.createElement("div",null,r.a.createElement(Ue,{text:"\u521b\u5efa\u4e8e",time:n.create_at}))),r.a.createElement(d.l,{style:{background:"#fff"},value:this.state.tabIndex,onChange:function(t,n){e.setState({tabIndex:n})},indicatorColor:"primary",textColor:"primary",fullWidth:!0},r.a.createElement(d.k,{label:"\u6700\u8fd1\u53c2\u4e0e"}),r.a.createElement(d.k,{label:"\u6700\u8fd1\u53d1\u5e03"}),r.a.createElement(d.k,{label:"\u8bdd\u9898\u6536\u85cf"})),r.a.createElement("div",null,this.state.tabData[this.state.tabIndex].map(function(e){return r.a.createElement(Ee,Object.assign({key:e.id},e))})),r.a.createElement(Ae,null)):r.a.createElement(Ce,null))}}]),t}(r.a.Component),nt=n(77),at=n.n(nt),rt=[{id:"ask",name:"\u95ee\u7b54"},{id:"share",name:"\u5206\u4eab"},{id:"job",name:"\u62db\u8058"},{id:"dev",name:"\u5ba2\u6237\u7aef\u6d4b\u8bd5"}],ct=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={tab:"ask",title:"",content:"",titleErrorVisible:!1,contentErrorVisible:!1},n.handleSubmit=function(){var e=Object(k.a)(y.a.mark(function e(t){var a,r,c,o,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.state,r=a.tab,c=a.title,o=a.content,c&&o){e.next=5;break}return n.setState({titleErrorVisible:!c,contentErrorVisible:!o}),e.abrupt("return");case 5:return e.next=7,n.props.postTopic({tab:r,title:c,content:o});case 7:i=e.sent,n.props.history.replace("/topic/".concat(i));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.handleTabChange=function(e){n.setState({tab:e.target.value})},n.shouldShowTitleError=function(){return n.state.titleErrorVisible&&!n.state.title},n.shouldShowContentError=function(){return n.state.contentErrorVisible&&!n.state.content},n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.shouldShowTitleError(),n=this.shouldShowContentError();return r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(ue,{title:"\u53d1\u5e03\u8bdd\u9898",rightWidget:function(){return r.a.createElement(d.f,{color:"default",type:"submit"},r.a.createElement(_.h,null))}}),r.a.createElement("div",{style:{padding:10}},r.a.createElement(d.m,{fullWidth:!0,className:at.a.control,label:"\u6807\u9898",InputLabelProps:{htmlFor:"title"},InputProps:{id:"title",value:this.state.title,onChange:function(t){e.setState({title:t.target.value})},error:t},error:t,helperText:t?"\u8bf7\u8f93\u5165\u6807\u9898":null}),r.a.createElement(d.m,{fullWidth:!0,className:at.a.control,select:!0,label:"\u5206\u533a",id:"tab",SelectProps:{native:!0,id:"tab",value:this.state.tab,onChange:this.handleTabChange}},rt.map(function(e){var t=e.id,n=e.name;return r.a.createElement("option",{key:t,value:t},n)})),r.a.createElement(d.m,{multiline:!0,rows:"10",fullWidth:!0,className:at.a.control,label:"\u5185\u5bb9",InputLabelProps:{htmlFor:"content"},InputProps:{id:"content",value:this.state.content,onChange:function(t){e.setState({content:t.target.value})},error:n},error:n,helperText:n?"\u8bf7\u8f93\u5165\u5185\u5bb9":null})))}}]),t}(r.a.Component),ot=Object(Z.a)(S(F),w.a)(ct),it=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(U,null,function(e){var t=e.visible,n=e.message,a=(e.setVisible,e.hide);return r.a.createElement(d.j,{open:t,autoHideDuration:3e3,onClose:a,message:n})})}}]),t}(r.a.Component),lt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function st(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Q,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");lt?(function(e,t){fetch(e).then(function(n){404===n.status||-1===n.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):st(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):st(t,e)})}}()},58:function(e,t,n){e.exports={link:"common_link__Jfvtk"}},75:function(e,t,n){e.exports={container:"avatar_container__USivu",avatar:"avatar_avatar__2_G_B",content:"avatar_content__1Touv"}},76:function(e,t,n){e.exports={container:"detail_container__3u9El",title:"detail_title__1ldUt",info:"detail_info__2peOv",prettyprint:"detail_prettyprint__1hqQk",tip:"detail_tip__1bcuI"}},77:function(e,t,n){e.exports={control:"post_control__yZJH8"}}},[[5487,2,1]]]);
//# sourceMappingURL=main.789f2eb2.chunk.js.map